name: Clean Root Directory

on:
  workflow_dispatch:
    inputs:
      target_file:
        description: '要删除的文件名（需包含扩展名）'
        required: true

jobs:
  cleanup:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
        with:
          persist-credentials: false # 必须关闭凭证持久化
      
      - name: Configure Git
        run: |
          git config --global user.name "GitHub Actions"
          git config --global user.email "actions@github.com"

      - name: Delete File
        run: |
          git rm -f ${{ github.event.inputs.target_file }}
          git commit -m "自动化删除文件: ${{ github.event.inputs.target_file }}"
      
      - name: Push Changes
        uses: ad-m/github-push-action@master
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          branch: main
          force: true
